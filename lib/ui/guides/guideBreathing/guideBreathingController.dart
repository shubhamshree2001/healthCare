import 'package:flutter/animation.dart';
import 'package:flutter/widgets.dart';
import 'package:get/get.dart';
import 'package:mindpeers_mobile_flutter/data/queryMutation/guides_query_mutation.dart';
import 'package:mindpeers_mobile_flutter/repository/guidesRepo/guides_repo.dart';
import 'package:mindpeers_mobile_flutter/widgets/common_widget.dart';
import 'package:audioplayers/audioplayers.dart';

class GuidesBreathingController extends GetxController
    with GetTickerProviderStateMixin {
  final GuidesRepo guidesRepo;

  GuidesBreathingController({required this.guidesRepo});
  AnimationController? _breathingController;
  var breathe = 0.0.toDouble().obs;
  var currentPosA = -30.obs;
  var currentPosB = 0.obs;
  var currentPosC = 30.obs;
  var currentPos = -30.obs;
  var currentColorA = "none".obs;
  var currentColorB = "none".obs;
  var currentColorC = "none".obs;
  @override
  void onInit() {
    super.onInit();
    _breathingController = AnimationController(
        vsync: this, duration: Duration(milliseconds: 1000));
    _breathingController!.addStatusListener((status) {
      if (status == AnimationStatus.completed) {
        _breathingController!.reverse();
      } else if (status == AnimationStatus.dismissed) {
        _breathingController!.forward();
      }
      _breathingController!.addListener(() {
        breathe.value = _breathingController!.value;
      });
      _breathingController!.forward();
    });
  }

  String getSvg() {
    return ''' <svg xmlns="http://www.w3.org/2000/svg" width="282.579" height="246.269" viewBox="0 0 282.579 246.269">
  <g id="tranquilizer" transform="translate(-64.217 -279)">
    <g id="Ellipse_320" data-name="Ellipse 320" transform="translate(143.804 287.469) rotate(0)" fill="none" stroke="#fff" stroke-width="3">
      <ellipse cx="62.912" cy="105.861" rx="62.912" ry="105.861" stroke="none"/>
      <ellipse cx="62.912" cy="105.861" rx="61.412" ry="104.361" fill="${currentColorC.toString()}"/>
    </g>
    <g id="Ellipse_321" data-name="Ellipse 321" transform="translate(237.829 279) rotate(30)" fill="none" stroke="#fff" stroke-width="3">
      <ellipse cx="62.912" cy="105.861" rx="62.912" ry="105.861" stroke="none"/>
      <ellipse cx="62.912" cy="105.861" rx="61.412" ry="104.361" fill="${currentColorB.toString()}"/>
    </g>
    <g id="Exclusion_1" data-name="Exclusion 1" transform="translate(95.669 287.469)" fill="none">
      <path d="M108.2,211.616c-28.515-.086-63.542-25.351-86.72-65.495C-7.755,95.489-7.06,40.36,23.03,22.986c13.444-7.761,30.486-6.671,47.829,1.424C81.757,9.168,95.767,0,111.046,0c15,0,28.779,8.835,39.591,23.585,16.712-7.336,33.032-8.089,46.006-.6,30.089,17.373,30.785,72.5,1.552,123.135-21.951,38.021-54.534,62.695-82.146,65.271a38.065,38.065,0,0,1-5,.33Q109.615,211.723,108.2,211.616Z" stroke="none"/>
      <path d="M 111.0458908081055 208.7227935791016 C 112.5814590454102 208.7227935791016 114.1321411132812 208.6205139160156 115.6548614501953 208.4187927246094 L 115.7701110839844 208.4057922363281 C 122.2864532470703 207.7977600097656 129.1658935546875 205.8838195800781 136.2173614501953 202.7171325683594 C 143.2963256835938 199.5381011962891 150.4212951660156 195.1543884277344 157.3942718505859 189.6877288818359 C 171.9567413330078 178.2710723876953 185.1671142578125 162.6873931884766 195.5972442626953 144.6213226318359 C 202.6195526123047 132.4581756591797 208.0141448974609 119.8484802246094 211.6311798095703 107.142578125 C 213.3650207519531 101.0518569946289 214.6714935302734 94.97029876708984 215.5142974853516 89.06688690185547 C 216.3462371826172 83.23951721191406 216.7334289550781 77.53757476806641 216.6651153564453 72.11948394775391 C 216.5971832275391 66.73229217529297 216.0784606933594 61.58520126342773 215.1233673095703 56.82117080688477 C 214.1677703857422 52.05467224121094 212.7676086425781 47.63410949707031 210.9617767333984 43.68235778808594 C 207.2693634033203 35.60216903686523 201.9471435546875 29.51317024230957 195.1431732177734 25.5845775604248 C 189.5456390380859 22.35310745239258 183.1390838623047 20.71460723876953 176.1014862060547 20.71460723876953 C 168.4963073730469 20.71460723876953 160.3345794677734 22.60470199584961 151.8431091308594 26.33242034912109 L 149.6400146484375 27.29954528808594 L 148.2176208496094 25.35904502868652 C 142.9682769775391 18.19766998291016 137.1268920898438 12.63485813140869 130.8557434082031 8.825107574462891 C 124.4931793212891 4.959857940673828 117.8281784057617 3.000014066696167 111.0458908081055 3.000014066696167 C 104.1396102905273 3.000014066696167 97.35811614990234 5.032045364379883 90.8897705078125 9.039639472961426 C 84.51336669921875 12.99026393890381 78.59504699707031 18.74879455566406 73.29924011230469 26.15529632568359 L 71.84920501708984 28.18326377868652 L 69.59011077880859 27.1288890838623 C 65.07923889160156 25.02354621887207 60.58633041381836 23.41157722473145 56.23623657226562 22.33779525756836 C 51.87454986572266 21.26113891601562 47.61342620849609 20.71523284912109 43.57126998901367 20.71523284912109 C 36.53298950195312 20.71523284912109 30.12648773193359 22.35351371765137 24.52989387512207 25.58448219299316 C 17.72573852539062 29.51317024230957 12.40351963043213 35.60216903686523 8.711082458496094 43.68235778808594 C 6.905238151550293 47.63410949707031 5.505082130432129 52.05467224121094 4.549488067626953 56.82120132446289 C 3.594394445419312 61.58520126342773 3.07567572593689 66.73229217529297 3.007769584655762 72.11948394775391 C 2.939456939697266 77.53757476806641 3.326644420623779 83.23951721191406 4.158582210540771 89.06688690185547 C 5.001363277435303 94.97029876708984 6.30783224105835 101.0518569946289 8.041707038879395 107.142578125 C 11.65870666503906 119.8484802246094 17.05330085754395 132.4581756591797 24.07558250427246 144.6212615966797 C 29.65117645263672 154.2780151367188 36.03745651245117 163.2563629150391 43.05705261230469 171.3069458007812 C 49.82942581176758 179.0740203857422 57.08733367919922 185.8629760742188 64.62911224365234 191.4852600097656 C 72.03433227539062 197.0057373046875 79.55223846435547 201.2833557128906 86.97399139404297 204.1993255615234 C 94.38220977783203 207.1099548339844 101.5258026123047 208.5959777832031 108.206298828125 208.6161041259766 L 108.3138656616211 208.616455078125 L 108.4211120605469 208.6244812011719 C 109.2931137084961 208.689697265625 110.1762084960938 208.7227935791016 111.0458908081055 208.7227935791016 M 111.0458908081055 211.7227935791016 C 110.0918045043945 211.7227935791016 109.1416168212891 211.686767578125 108.1972732543945 211.6161041259766 C 79.68214416503906 211.5301666259766 44.65576934814453 186.2652587890625 21.4775505065918 146.1213226318359 C -7.754886627197266 95.48863983154297 -7.059574127197266 40.35985946655273 23.02980041503906 22.98645210266113 C 36.47364044189453 15.22523403167725 53.51560974121094 16.31579208374023 70.85889434814453 24.4103889465332 C 81.75733184814453 9.168326377868652 95.76708221435547 1.416015584254637e-05 111.0458908081055 1.416015584254637e-05 C 126.0497970581055 1.416015584254637e-05 139.82470703125 8.83460807800293 150.63720703125 23.58545112609863 C 167.3491058349609 16.24901008605957 183.6694183349609 15.4967041015625 196.6430816650391 22.98645210266113 C 226.732421875 40.35985946655273 227.427734375 95.48863983154297 198.1953277587891 146.1213226318359 C 176.2446441650391 184.1421051025391 143.6611480712891 208.8162994384766 116.0488357543945 211.392822265625 C 114.3984222412109 211.6114501953125 112.7299880981445 211.7227935791016 111.0458908081055 211.7227935791016 Z" stroke="none" fill="#fff"/>
    </g>
    <g id="Group_14138" data-name="Group 14138" transform="translate(64.217 279)">
      <ellipse id="Ellipse_319" data-name="Ellipse 319" cx="62.912" cy="105.861" rx="62.912" ry="105.861" transform="translate(0 62.912) rotate(-30)" fill="${currentColorA.toString()}"/>   
    </g>
  </g>
</svg>
   ''';
  }

  // void moveToNextEclise() {
  //   while(currentPos <31 ){
  //   if (currentPosA == currentPos) {
  //     currentColorA.value = "#7be5f6";
  //     currentPos = currentPos + 30;
  //   } else if {currentPosB == currentPos}{
  //     currentColorA.value = "none";

  //   }}
  // }

  String anxiousSvg() {
    return '''
      <svg xmlns="http://www.w3.org/2000/svg" width="105.999" height="263" viewBox="0 0 105.999 263">
  <path id="Anxious" d="M572,1541.5c0-42.859,14.73-79.326,35.293-92.869a38,38,0,1,1,35.413,0C663.27,1462.175,678,1498.641,678,1541.5c0,54.4-23.728,98.5-53,98.5S572,1595.9,572,1541.5Z" transform="translate(-572 -1377)" fill="#e4ffaf"/>
</svg>

    ''';
  }

  String anxiousMaxSvg() {
    return ''' <svg xmlns="http://www.w3.org/2000/svg" width="145.001" height="263" viewBox="0 0 145.001 263">
  <path id="Anxious-expanded" d="M553,1541.5c0-44.572,21.788-82.229,51.685-94.381a38,38,0,1,1,41.013-.246c30.213,11.882,52.3,49.749,52.3,94.627,0,54.4-32.459,98.5-72.5,98.5S553,1595.9,553,1541.5Z" transform="translate(-553 -1377)" fill="#e4ffaf"/>
</svg>

  ''';
  }
}
//#7be5f6
